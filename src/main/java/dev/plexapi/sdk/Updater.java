/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package dev.plexapi.sdk;

import static dev.plexapi.sdk.operations.Operations.RequestOperation;
import static dev.plexapi.sdk.operations.Operations.RequestlessOperation;

import dev.plexapi.sdk.models.operations.ApplyUpdatesRequest;
import dev.plexapi.sdk.models.operations.ApplyUpdatesRequestBuilder;
import dev.plexapi.sdk.models.operations.ApplyUpdatesResponse;
import dev.plexapi.sdk.models.operations.CheckUpdatesRequest;
import dev.plexapi.sdk.models.operations.CheckUpdatesRequestBuilder;
import dev.plexapi.sdk.models.operations.CheckUpdatesResponse;
import dev.plexapi.sdk.models.operations.GetUpdatesStatusRequestBuilder;
import dev.plexapi.sdk.models.operations.GetUpdatesStatusResponse;
import dev.plexapi.sdk.operations.ApplyUpdates;
import dev.plexapi.sdk.operations.CheckUpdates;
import dev.plexapi.sdk.operations.GetUpdatesStatus;
import java.lang.Exception;

/**
 * This describes the API for searching and applying updates to the Plex Media Server.
 * Updates to the status can be observed via the Event API.
 */
public class Updater {
    private final SDKConfiguration sdkConfiguration;
    private final AsyncUpdater asyncSDK;

    Updater(SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.asyncSDK = new AsyncUpdater(this, sdkConfiguration);
    }

    /**
     * Switches to the async SDK.
     * 
     * @return The async SDK
     */
    public AsyncUpdater async() {
        return asyncSDK;
    }

    /**
     * Applying updates
     * 
     * <p>Apply any downloaded updates.  Note that the two parameters `tonight` and `skip` are effectively mutually exclusive. The `tonight` parameter takes precedence and `skip` will be ignored if `tonight` is also passed.
     * 
     * @return The call builder
     */
    public ApplyUpdatesRequestBuilder applyUpdates() {
        return new ApplyUpdatesRequestBuilder(sdkConfiguration);
    }

    /**
     * Applying updates
     * 
     * <p>Apply any downloaded updates.  Note that the two parameters `tonight` and `skip` are effectively mutually exclusive. The `tonight` parameter takes precedence and `skip` will be ignored if `tonight` is also passed.
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return The response from the API call
     * @throws Exception if the API call fails
     */
    public ApplyUpdatesResponse applyUpdates(ApplyUpdatesRequest request) throws Exception {
        RequestOperation<ApplyUpdatesRequest, ApplyUpdatesResponse> operation
              = new ApplyUpdates.Sync(sdkConfiguration);
        return operation.handleResponse(operation.doRequest(request));
    }

    /**
     * Checking for updates
     * 
     * <p>Perform an update check and potentially download
     * 
     * @return The call builder
     */
    public CheckUpdatesRequestBuilder checkUpdates() {
        return new CheckUpdatesRequestBuilder(sdkConfiguration);
    }

    /**
     * Checking for updates
     * 
     * <p>Perform an update check and potentially download
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return The response from the API call
     * @throws Exception if the API call fails
     */
    public CheckUpdatesResponse checkUpdates(CheckUpdatesRequest request) throws Exception {
        RequestOperation<CheckUpdatesRequest, CheckUpdatesResponse> operation
              = new CheckUpdates.Sync(sdkConfiguration);
        return operation.handleResponse(operation.doRequest(request));
    }

    /**
     * Querying status of updates
     * 
     * <p>Get the status of updating the server
     * 
     * @return The call builder
     */
    public GetUpdatesStatusRequestBuilder getUpdatesStatus() {
        return new GetUpdatesStatusRequestBuilder(sdkConfiguration);
    }

    /**
     * Querying status of updates
     * 
     * <p>Get the status of updating the server
     * 
     * @return The response from the API call
     * @throws Exception if the API call fails
     */
    public GetUpdatesStatusResponse getUpdatesStatusDirect() throws Exception {
        RequestlessOperation<GetUpdatesStatusResponse> operation
            = new GetUpdatesStatus.Sync(sdkConfiguration);
        return operation.handleResponse(operation.doRequest());
    }

}
