/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package dev.plexapi.sdk;

import static dev.plexapi.sdk.operations.Operations.AsyncRequestOperation;
import static dev.plexapi.sdk.operations.Operations.AsyncRequestlessOperation;

import dev.plexapi.sdk.models.operations.ApplyUpdatesRequest;
import dev.plexapi.sdk.models.operations.CheckUpdatesRequest;
import dev.plexapi.sdk.models.operations.async.ApplyUpdatesRequestBuilder;
import dev.plexapi.sdk.models.operations.async.ApplyUpdatesResponse;
import dev.plexapi.sdk.models.operations.async.CheckUpdatesRequestBuilder;
import dev.plexapi.sdk.models.operations.async.CheckUpdatesResponse;
import dev.plexapi.sdk.models.operations.async.GetUpdatesStatusRequestBuilder;
import dev.plexapi.sdk.models.operations.async.GetUpdatesStatusResponse;
import dev.plexapi.sdk.operations.ApplyUpdates;
import dev.plexapi.sdk.operations.CheckUpdates;
import dev.plexapi.sdk.operations.GetUpdatesStatus;
import java.util.concurrent.CompletableFuture;

/**
 * This describes the API for searching and applying updates to the Plex Media Server.
 * Updates to the status can be observed via the Event API.
 */
public class AsyncUpdater {
    private final SDKConfiguration sdkConfiguration;
    private final Updater syncSDK;

    AsyncUpdater(Updater syncSDK, SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.syncSDK = syncSDK;
    }

    /**
     * Switches to the sync SDK.
     * 
     * @return The sync SDK
     */
    public Updater sync() {
        return syncSDK;
    }


    /**
     * Applying updates
     * 
     * <p>Apply any downloaded updates.  Note that the two parameters `tonight` and `skip` are effectively mutually exclusive. The `tonight` parameter takes precedence and `skip` will be ignored if `tonight` is also passed.
     * 
     * @return The async call builder
     */
    public ApplyUpdatesRequestBuilder applyUpdates() {
        return new ApplyUpdatesRequestBuilder(sdkConfiguration);
    }

    /**
     * Applying updates
     * 
     * <p>Apply any downloaded updates.  Note that the two parameters `tonight` and `skip` are effectively mutually exclusive. The `tonight` parameter takes precedence and `skip` will be ignored if `tonight` is also passed.
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return CompletableFuture&lt;ApplyUpdatesResponse&gt; - The async response
     */
    public CompletableFuture<ApplyUpdatesResponse> applyUpdates(ApplyUpdatesRequest request) {
        AsyncRequestOperation<ApplyUpdatesRequest, ApplyUpdatesResponse> operation
              = new ApplyUpdates.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }


    /**
     * Checking for updates
     * 
     * <p>Perform an update check and potentially download
     * 
     * @return The async call builder
     */
    public CheckUpdatesRequestBuilder checkUpdates() {
        return new CheckUpdatesRequestBuilder(sdkConfiguration);
    }

    /**
     * Checking for updates
     * 
     * <p>Perform an update check and potentially download
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return CompletableFuture&lt;CheckUpdatesResponse&gt; - The async response
     */
    public CompletableFuture<CheckUpdatesResponse> checkUpdates(CheckUpdatesRequest request) {
        AsyncRequestOperation<CheckUpdatesRequest, CheckUpdatesResponse> operation
              = new CheckUpdates.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }


    /**
     * Querying status of updates
     * 
     * <p>Get the status of updating the server
     * 
     * @return The async call builder
     */
    public GetUpdatesStatusRequestBuilder getUpdatesStatus() {
        return new GetUpdatesStatusRequestBuilder(sdkConfiguration);
    }

    /**
     * Querying status of updates
     * 
     * <p>Get the status of updating the server
     * 
     * @return CompletableFuture&lt;GetUpdatesStatusResponse&gt; - The async response
     */
    public CompletableFuture<GetUpdatesStatusResponse> getUpdatesStatusDirect() {
        AsyncRequestlessOperation<GetUpdatesStatusResponse> operation
            = new GetUpdatesStatus.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }

}
