/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package dev.plexapi.sdk;

import static dev.plexapi.sdk.operations.Operations.AsyncRequestlessOperation;
import static dev.plexapi.sdk.operations.Operations.AsyncRequestOperation;

import dev.plexapi.sdk.models.operations.StartTaskRequest;
import dev.plexapi.sdk.models.operations.StopTaskRequest;
import dev.plexapi.sdk.models.operations.async.GetTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.GetTasksResponse;
import dev.plexapi.sdk.models.operations.async.StartTaskRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StartTaskResponse;
import dev.plexapi.sdk.models.operations.async.StartTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StartTasksResponse;
import dev.plexapi.sdk.models.operations.async.StopTaskRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StopTaskResponse;
import dev.plexapi.sdk.models.operations.async.StopTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StopTasksResponse;
import dev.plexapi.sdk.operations.GetTasks;
import dev.plexapi.sdk.operations.StartTask;
import dev.plexapi.sdk.operations.StartTasks;
import dev.plexapi.sdk.operations.StopTask;
import dev.plexapi.sdk.operations.StopTasks;
import java.util.concurrent.CompletableFuture;

/**
 * The butler is responsible for running periodic tasks.  Some tasks run daily, others every few days, and some weekly.  These includes database maintenance, metadata updating, thumbnail generation, media analysis, and other tasks.
 */
public class AsyncButler {
    private final SDKConfiguration sdkConfiguration;
    private final Butler syncSDK;

    AsyncButler(Butler syncSDK, SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.syncSDK = syncSDK;
    }

    /**
     * Switches to the sync SDK.
     * 
     * @return The sync SDK
     */
    public Butler sync() {
        return syncSDK;
    }


    /**
     * Stop all Butler tasks
     * 
     * <p>This endpoint will stop all currently running tasks and remove any scheduled tasks from the queue.
     * 
     * @return The async call builder
     */
    public StopTasksRequestBuilder stopTasks() {
        return new StopTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Stop all Butler tasks
     * 
     * <p>This endpoint will stop all currently running tasks and remove any scheduled tasks from the queue.
     * 
     * @return CompletableFuture&lt;StopTasksResponse&gt; - The async response
     */
    public CompletableFuture<StopTasksResponse> stopTasksDirect() {
        AsyncRequestlessOperation<StopTasksResponse> operation
            = new StopTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Get all Butler tasks
     * 
     * <p>Get the list of butler tasks and their scheduling
     * 
     * @return The async call builder
     */
    public GetTasksRequestBuilder getTasks() {
        return new GetTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Get all Butler tasks
     * 
     * <p>Get the list of butler tasks and their scheduling
     * 
     * @return CompletableFuture&lt;GetTasksResponse&gt; - The async response
     */
    public CompletableFuture<GetTasksResponse> getTasksDirect() {
        AsyncRequestlessOperation<GetTasksResponse> operation
            = new GetTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Start all Butler tasks
     * 
     * <p>This endpoint will attempt to start all Butler tasks that are enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 
     * <p>  1. Any tasks not scheduled to run on the current day will be skipped.
     *   2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     *   3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     *   4. If we are outside the configured window, the task will start immediately.
     * 
     * @return The async call builder
     */
    public StartTasksRequestBuilder startTasks() {
        return new StartTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Start all Butler tasks
     * 
     * <p>This endpoint will attempt to start all Butler tasks that are enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 
     * <p>  1. Any tasks not scheduled to run on the current day will be skipped.
     *   2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     *   3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     *   4. If we are outside the configured window, the task will start immediately.
     * 
     * @return CompletableFuture&lt;StartTasksResponse&gt; - The async response
     */
    public CompletableFuture<StartTasksResponse> startTasksDirect() {
        AsyncRequestlessOperation<StartTasksResponse> operation
            = new StartTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Stop a single Butler task
     * 
     * <p>This endpoint will stop a currently running task by name, or remove it from the list of scheduled tasks if it exists
     * 
     * @return The async call builder
     */
    public StopTaskRequestBuilder stopTask() {
        return new StopTaskRequestBuilder(sdkConfiguration);
    }

    /**
     * Stop a single Butler task
     * 
     * <p>This endpoint will stop a currently running task by name, or remove it from the list of scheduled tasks if it exists
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return CompletableFuture&lt;StopTaskResponse&gt; - The async response
     */
    public CompletableFuture<StopTaskResponse> stopTask(StopTaskRequest request) {
        AsyncRequestOperation<StopTaskRequest, StopTaskResponse> operation
              = new StopTask.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }


    /**
     * Start a single Butler task
     * 
     * <p>This endpoint will attempt to start a specific Butler task by name.
     * 
     * @return The async call builder
     */
    public StartTaskRequestBuilder startTask() {
        return new StartTaskRequestBuilder(sdkConfiguration);
    }

    /**
     * Start a single Butler task
     * 
     * <p>This endpoint will attempt to start a specific Butler task by name.
     * 
     * @param request The request object containing all the parameters for the API call.
     * @return CompletableFuture&lt;StartTaskResponse&gt; - The async response
     */
    public CompletableFuture<StartTaskResponse> startTask(StartTaskRequest request) {
        AsyncRequestOperation<StartTaskRequest, StartTaskResponse> operation
              = new StartTask.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }

}
