/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package dev.plexapi.sdk;

import static dev.plexapi.sdk.operations.Operations.AsyncRequestlessOperation;
import static dev.plexapi.sdk.operations.Operations.AsyncRequestOperation;

import dev.plexapi.sdk.models.operations.PathParamTaskName;
import dev.plexapi.sdk.models.operations.StartTaskRequest;
import dev.plexapi.sdk.models.operations.StopTaskRequest;
import dev.plexapi.sdk.models.operations.TaskName;
import dev.plexapi.sdk.models.operations.async.GetButlerTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.GetButlerTasksResponse;
import dev.plexapi.sdk.models.operations.async.StartAllTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StartAllTasksResponse;
import dev.plexapi.sdk.models.operations.async.StartTaskRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StartTaskResponse;
import dev.plexapi.sdk.models.operations.async.StopAllTasksRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StopAllTasksResponse;
import dev.plexapi.sdk.models.operations.async.StopTaskRequestBuilder;
import dev.plexapi.sdk.models.operations.async.StopTaskResponse;
import dev.plexapi.sdk.operations.GetButlerTasks;
import dev.plexapi.sdk.operations.StartAllTasks;
import dev.plexapi.sdk.operations.StartTask;
import dev.plexapi.sdk.operations.StopAllTasks;
import dev.plexapi.sdk.operations.StopTask;
import java.util.concurrent.CompletableFuture;

/**
 * Butler is the task manager of the Plex Media Server Ecosystem.
 */
public class AsyncButler {
    private final SDKConfiguration sdkConfiguration;
    private final Butler syncSDK;

    AsyncButler(Butler syncSDK, SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.syncSDK = syncSDK;
    }

    /**
     * Switches to the sync SDK.
     * 
     * @return The sync SDK
     */
    public Butler sync() {
        return syncSDK;
    }


    /**
     * Get Butler tasks
     * 
     * <p>Returns a list of butler tasks
     * 
     * @return The async call builder
     */
    public GetButlerTasksRequestBuilder getButlerTasks() {
        return new GetButlerTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Get Butler tasks
     * 
     * <p>Returns a list of butler tasks
     * 
     * @return CompletableFuture&lt;GetButlerTasksResponse&gt; - The async response
     */
    public CompletableFuture<GetButlerTasksResponse> getButlerTasksDirect() {
        AsyncRequestlessOperation<GetButlerTasksResponse> operation
            = new GetButlerTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Start all Butler tasks
     * 
     * <p>This endpoint will attempt to start all Butler tasks that are enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 1. Any tasks not scheduled to run on the current day will be skipped.
     * 2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     * 3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     * 4. If we are outside the configured window, the task will start immediately.
     * 
     * @return The async call builder
     */
    public StartAllTasksRequestBuilder startAllTasks() {
        return new StartAllTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Start all Butler tasks
     * 
     * <p>This endpoint will attempt to start all Butler tasks that are enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 1. Any tasks not scheduled to run on the current day will be skipped.
     * 2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     * 3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     * 4. If we are outside the configured window, the task will start immediately.
     * 
     * @return CompletableFuture&lt;StartAllTasksResponse&gt; - The async response
     */
    public CompletableFuture<StartAllTasksResponse> startAllTasksDirect() {
        AsyncRequestlessOperation<StartAllTasksResponse> operation
            = new StartAllTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Stop all Butler tasks
     * 
     * <p>This endpoint will stop all currently running tasks and remove any scheduled tasks from the queue.
     * 
     * @return The async call builder
     */
    public StopAllTasksRequestBuilder stopAllTasks() {
        return new StopAllTasksRequestBuilder(sdkConfiguration);
    }

    /**
     * Stop all Butler tasks
     * 
     * <p>This endpoint will stop all currently running tasks and remove any scheduled tasks from the queue.
     * 
     * @return CompletableFuture&lt;StopAllTasksResponse&gt; - The async response
     */
    public CompletableFuture<StopAllTasksResponse> stopAllTasksDirect() {
        AsyncRequestlessOperation<StopAllTasksResponse> operation
            = new StopAllTasks.Async(sdkConfiguration);
        return operation.doRequest()
            .thenCompose(operation::handleResponse);
    }


    /**
     * Start a single Butler task
     * 
     * <p>This endpoint will attempt to start a single Butler task that is enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 1. Any tasks not scheduled to run on the current day will be skipped.
     * 2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     * 3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     * 4. If we are outside the configured window, the task will start immediately.
     * 
     * @return The async call builder
     */
    public StartTaskRequestBuilder startTask() {
        return new StartTaskRequestBuilder(sdkConfiguration);
    }

    /**
     * Start a single Butler task
     * 
     * <p>This endpoint will attempt to start a single Butler task that is enabled in the settings. Butler tasks normally run automatically during a time window configured on the server's Settings page but can be manually started using this endpoint. Tasks will run with the following criteria:
     * 1. Any tasks not scheduled to run on the current day will be skipped.
     * 2. If a task is configured to run at a random time during the configured window and we are outside that window, the task will start immediately.
     * 3. If a task is configured to run at a random time during the configured window and we are within that window, the task will be scheduled at a random time within the window.
     * 4. If we are outside the configured window, the task will start immediately.
     * 
     * @param taskName the name of the task to be started.
     * @return CompletableFuture&lt;StartTaskResponse&gt; - The async response
     */
    public CompletableFuture<StartTaskResponse> startTask(TaskName taskName) {
        StartTaskRequest request =
            StartTaskRequest
                .builder()
                .taskName(taskName)
                .build();
        AsyncRequestOperation<StartTaskRequest, StartTaskResponse> operation
              = new StartTask.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }


    /**
     * Stop a single Butler task
     * 
     * <p>This endpoint will stop a currently running task by name, or remove it from the list of scheduled tasks if it exists. See the section above for a list of task names for this endpoint.
     * 
     * @return The async call builder
     */
    public StopTaskRequestBuilder stopTask() {
        return new StopTaskRequestBuilder(sdkConfiguration);
    }

    /**
     * Stop a single Butler task
     * 
     * <p>This endpoint will stop a currently running task by name, or remove it from the list of scheduled tasks if it exists. See the section above for a list of task names for this endpoint.
     * 
     * @param taskName The name of the task to be started.
     * @return CompletableFuture&lt;StopTaskResponse&gt; - The async response
     */
    public CompletableFuture<StopTaskResponse> stopTask(PathParamTaskName taskName) {
        StopTaskRequest request =
            StopTaskRequest
                .builder()
                .taskName(taskName)
                .build();
        AsyncRequestOperation<StopTaskRequest, StopTaskResponse> operation
              = new StopTask.Async(sdkConfiguration);
        return operation.doRequest(request)
            .thenCompose(operation::handleResponse);
    }

}
