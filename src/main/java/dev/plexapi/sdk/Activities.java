/* 
 * Code generated by Speakeasy (https://speakeasy.com). DO NOT EDIT.
 */
package dev.plexapi.sdk;

import static dev.plexapi.sdk.operations.Operations.RequestlessOperation;
import static dev.plexapi.sdk.operations.Operations.RequestOperation;

import dev.plexapi.sdk.models.operations.CancelServerActivitiesRequest;
import dev.plexapi.sdk.models.operations.CancelServerActivitiesRequestBuilder;
import dev.plexapi.sdk.models.operations.CancelServerActivitiesResponse;
import dev.plexapi.sdk.models.operations.GetServerActivitiesRequestBuilder;
import dev.plexapi.sdk.models.operations.GetServerActivitiesResponse;
import dev.plexapi.sdk.operations.CancelServerActivities;
import dev.plexapi.sdk.operations.GetServerActivities;
import java.lang.Exception;
import java.lang.String;

/**
 * Activities are awesome. They provide a way to monitor and control asynchronous operations on the server. In order to receive real-time updates for activities, a client would normally subscribe via either EventSource or Websocket endpoints.
 * Activities are associated with HTTP replies via a special `X-Plex-Activity` header which contains the UUID of the activity.
 * Activities are optional cancellable. If cancellable, they may be cancelled via the `DELETE` endpoint. Other details:
 * - They can contain a `progress` (from 0 to 100) marking the percent completion of the activity.
 * - They must contain an `type` which is used by clients to distinguish the specific activity.
 * - They may contain a `Context` object with attributes which associate the activity with various specific entities (items, libraries, etc.)
 * - The may contain a `Response` object which attributes which represent the result of the asynchronous operation.
 */
public class Activities {
    private final SDKConfiguration sdkConfiguration;
    private final AsyncActivities asyncSDK;

    Activities(SDKConfiguration sdkConfiguration) {
        this.sdkConfiguration = sdkConfiguration;
        this.asyncSDK = new AsyncActivities(this, sdkConfiguration);
    }

    /**
     * Switches to the async SDK.
     * 
     * @return The async SDK
     */
    public AsyncActivities async() {
        return asyncSDK;
    }

    /**
     * Get Server Activities
     * 
     * <p>Get Server Activities
     * 
     * @return The call builder
     */
    public GetServerActivitiesRequestBuilder getServerActivities() {
        return new GetServerActivitiesRequestBuilder(sdkConfiguration);
    }

    /**
     * Get Server Activities
     * 
     * <p>Get Server Activities
     * 
     * @return The response from the API call
     * @throws Exception if the API call fails
     */
    public GetServerActivitiesResponse getServerActivitiesDirect() throws Exception {
        RequestlessOperation<GetServerActivitiesResponse> operation
            = new GetServerActivities.Sync(sdkConfiguration);
        return operation.handleResponse(operation.doRequest());
    }

    /**
     * Cancel Server Activities
     * 
     * <p>Cancel Server Activities
     * 
     * @return The call builder
     */
    public CancelServerActivitiesRequestBuilder cancelServerActivities() {
        return new CancelServerActivitiesRequestBuilder(sdkConfiguration);
    }

    /**
     * Cancel Server Activities
     * 
     * <p>Cancel Server Activities
     * 
     * @param activityUUID The UUID of the activity to cancel.
     * @return The response from the API call
     * @throws Exception if the API call fails
     */
    public CancelServerActivitiesResponse cancelServerActivities(String activityUUID) throws Exception {
        CancelServerActivitiesRequest request =
            CancelServerActivitiesRequest
                .builder()
                .activityUUID(activityUUID)
                .build();
        RequestOperation<CancelServerActivitiesRequest, CancelServerActivitiesResponse> operation
              = new CancelServerActivities.Sync(sdkConfiguration);
        return operation.handleResponse(operation.doRequest(request));
    }

}
